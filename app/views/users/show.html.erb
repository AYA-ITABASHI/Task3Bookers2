<%= flash[:notice] %>
<main>
<div class="container">
 <div class="row">
  <div class="col-md-3">
    <%= render 'books/list', books: @user %>
    <h3>New book</h3>
     <% if Book.new.errors.any? %>
     <%= Book.new.errors.count %>errors prohibited this obj from being saved:
     <ul>
     <% Book.new.errors.full_messages.each do |message| %>
     <li><%= message %></li>
     <% end %>
     </ul>
     <% end %>
     <%= form_with model: Book.new do |f| %>
      <label>Title</label><br>
      <input class="form-control book-title" type="text" name="book[title]" id="book_title">
     <label>Opinion</label><br>
      <%= f.text_area :body %><br>
     <input class= "btn btn-success" type="submit" value="Create Book">
     <% end %>
  </div>

  <div class="col-md-8 offset-md-1">
  <h1>Books</h1>
  <table class="table table-striped">
   <thead>
    <tr>
     <th></th>
     <th>Title</th>
     <th>Opinion</th>
    </tr>
   </thead>
   <% @books.each do |book| %>
   <tbody>
    <tr>
     <td><%= link_to user_path(book.user.id) do %>
       <%= image_tag book.user.get_profile_image(100,100) %>
       <% end %>
     </td>
     <td><%= link_to book_path(book.id) do %>
       <%= book.title %>
       <% end %>
     </td>
     <td><%= book.body %></td>
    </tr>
   </tbody>
   <% end %>
  </table>
  </div>
 </div>
</div>
</main>
 <div class="container">
  <div class="row">
   <div class="mx-auto">
   <footer>CopyRight Infratop.inc</footer>
   </div>
  </div>
 </div>

